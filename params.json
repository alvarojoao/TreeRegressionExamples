{"name":"Time Series perdition examples","tagline":"Tree regression (CART) with time series examples","body":"# Tree Regression with time series Examples\r\nTree regression time series examples <br/>\r\nThese examples are using \"**caret**\",\"**data.table**\" and \"**bst**\" libraries.\r\n\r\n` install.packages(\"caret\")`<br/>\r\n` install.packages(\"data.table\")`<br/>\r\n` install.packages(\"bst\")`<br/>\r\n\r\n##Databases:\r\n\r\n- SP500.csv\r\n- elec.dat\t\r\n- stemp.dat\t\r\n- store1.csv\r\n- store2.csv\r\n\r\nAll the databases were retrived from the following places:\r\n<br/><br/>\r\n**S&P500** Close value of day (daily)(from January 2, 1990 to December 31, 1999).<br/>\r\n**SP500** -> <br/>\r\n```\r\n> library(MASS)\r\n> data(SP500)\r\n> plot(SP500, type = 'l')\r\n```\r\n**elec.dat** and **stemp.dat** are from the Paul Cowpertwait's databases, from **Introductory Time Series with R** <br/>\r\nhttp://staff.elena.aut.ac.nz/Paul-Cowpertwait/ts/#Data\r\n\r\nThe monthly supply of electricity (millions of kWh), beer (Ml),\r\nand chocolate-based production (tonnes) in Australia over the period January\r\n1958 to December 1990 are available from the Australian Bureau of Statistics\r\n(ABS).\r\n <br/>\r\n**elec** -> <br/>\r\nhttp://staff.elena.aut.ac.nz/Paul-Cowpertwait/ts/cbe.dat\r\n\r\nThe monthly temperature data (1850â€“2007; see Brohan et al. 2006) for the southern\r\nhemisphere were extracted from the database maintained by the University\r\nof East Anglia Climatic Research Unit\r\n<br/>\r\n**stemp** -> <br/>\r\nhttp://staff.elena.aut.ac.nz/Paul-Cowpertwait/ts/stemp.dat\r\n\r\nThe other databases **store1** ,**store2**  are from :\r\nhttps://www.kaggle.com/c/rossmann-store-sales/data<br/>\r\nYou are provided with historical sales data for 1,115 Rossmann stores, from 01/01/2013 to 31/07/2015. The task is to forecast the \"Sales\" column for the test set. Note that some stores in the dataset were temporarily closed for refurbishment.<br/>\r\nThe date is in one column<br/>\r\n**store1** -> store1.csv <br/>\r\n**store2** -> store2.csv <br/>\r\n\r\n#Basic approach<br/>\r\n\r\n##Preparing the samples<br/>\r\nWe will use the `createTimeSlices` tool, and generate the following format of samples:<br/>\r\n<img src='https://raw.githubusercontent.com/alvarojoao/TreeRegressionExamples/master/imagens/slices.png'><br/>\r\nSo you can make a cross-validation based on holdout method or K-fold cross validation , respecting the series cronology.<br/>\r\n##Code Sample<br/>\r\n```\r\nvariabla<- 'elec'#the-predictable-variable\r\nnLag <- 12\r\nkhorizon <- 1\r\n#adding the lags (historical data) as atributes in the base\r\nbase <- setDT(base)[, paste0(variable, 1:nLag) := shift(elec, 1:nLag)][]\r\nbase <- base[(nLag+1):nrow(base),]\r\ntimeSlices <- createTimeSlices(1:nrow(base), \r\n                   initialWindow =nrow(base)*2/3, horizon = khorizon , fixedWindow = FALSE)\r\nstr(timeSlices,max.level = 1)\r\ntrainSlices <- timeSlices[[1]]\r\ntestSlices <- timeSlices[[2]]\r\nfor(i in 1:length(trainSlices)){\r\n  plsFitTime <- train(variable ~  .,\r\n                      data = base[trainSlices[[i]],], \r\n                      method = \"treebag\"\r\n                      )\r\n  pred <- predict(plsFitTime,base[testSlices[[i]],])\r\n  true <- base$elec[testSlices[[i]]]\r\n}\r\n```\r\n`...`\r\n`method = \"treebag\"#here we can change for any other from this list:`[here](http://topepo.github.io/caret/modelList.html)\r\n`....`\r\n##Have FUN!<br/>\r\nreferences:<br/>\r\n[caret lib](http://topepo.github.io/caret/splitting.html#time)<br/>\r\n[r-blogger time series cross validation](http://www.r-bloggers.com/time-series-cross-validation-5/)<br/>\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}